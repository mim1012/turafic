---
description: 주간/월간 테스트 보고서 자동 생성
model: claude-3-5-sonnet-20241022
allowed-tools: Read, Write, Bash(python:*), Glob
argument-hint: [report-type] [output-format]
---

네이버 쇼핑 트래픽 테스트 결과 종합 보고서를 자동으로 생성합니다.

## 파라미터
- **보고서 타입**: $1 (weekly, monthly, custom, 기본값: weekly)
- **출력 형식**: $2 (html, pdf, markdown, 기본값: html)

## 보고서 생성 프로세스

### 1. 데이터 수집

**테스트 상품 정보**:
@config/test_products.json

**순위 데이터**:
!`find data/rankings -name "*.json" -type f | sort -r | head -100`

**분석 결과**:
@data/results/analysis_*.json

**로그 파일**:
!`find logs -name "*.log" -type f | sort -r | head -50`

### 2. 보고서 생성 실행

```bash
python src/analysis/generate_report.py \
  --type $1 \
  --format $2 \
  --output data/results/report_$(date +%Y%m%d).$2
```

## 보고서 구성

### 1. Executive Summary (요약)
- 테스트 기간 및 범위
- 총 테스트 횟수
- 주요 성과 지표 (KPI)
- 핵심 발견 사항 (3-5개)

### 2. 테스트 개요
```markdown
## 테스트 개요

### 테스트 기간
- 시작일: 2025-01-01
- 종료일: 2025-01-07
- 총 기간: 7일

### 테스트 대상
- 상품 수: 10개
- 카테고리: 전자기기 (4), 패션 (3), 생활용품 (3)

### 테스트 설정
- 케이스 A (네이버 검색): 250회
- 케이스 B (쇼핑 직접): 200회
- 총 실행 횟수: 450회
- IP 변경 횟수: 45회
```

### 3. 순위 변동 분석

**전체 통계**:
| 지표 | 값 | 비고 |
|------|-----|------|
| 평균 순위 변동 | +12.4위 | 목표 +10위 달성 ✅ |
| 중앙값 | +8.0위 | - |
| 표준편차 | 15.2 | 변동폭 큼 |
| 최대 상승 | +68위 | 상품 12345678 |
| 최대 하락 | -12위 | 상품 87654321 |

**그래프**:
- 일별 평균 순위 변동 추이
- 상품별 순위 변동 박스플롯

### 4. 케이스별 효과성 비교

**케이스 A vs 케이스 B**:
```
케이스 A (네이버 검색)
- 평균 변동: +15.2위
- 성공률: 89.2%
- 평균 체류 시간: 48초

케이스 B (쇼핑 직접)
- 평균 변동: +9.6위
- 성공률: 84.5%
- 평균 체류 시간: 42초

통계적 유의성: p < 0.05
→ 케이스 A가 통계적으로 유의하게 더 효과적
```

**그래프**:
- 케이스별 박스플롯
- 케이스별 성공률 비교 (bar chart)

### 5. 시간대별 & 요일별 패턴

**시간대별 평균 순위 변동**:
| 시간대 | 평균 변동 | 테스트 횟수 | 성공률 |
|--------|-----------|-------------|--------|
| 오전 (06-12) | +14.2위 | 120회 | 91% |
| 오후 (12-18) | +11.8위 | 150회 | 88% |
| 저녁 (18-24) | +10.5위 | 110회 | 85% |
| 심야 (00-06) | +13.1위 | 70회 | 87% |

**요일별 패턴**:
- 주중 평균: +13.1위
- 주말 평균: +10.8위
→ 주중이 주말보다 2.3위 더 효과적

**히트맵**: 요일 × 시간대 순위 변동

### 6. 상품별 세부 분석

```markdown
## 상품별 성과

### 상위 성과 상품

**1위: 무선 이어폰 A (ID: 12345678)**
- 평균 변동: +18.2위
- 성공률: 92%
- 최대 상승: +68위 (1/3 오전 10시)
- 초기 순위: 92위 → 현재 평균: 74위
- 특이사항: 케이스 A에서 특히 효과적

**2위: 보조배터리 B (ID: 23456789)**
- 평균 변동: +15.8위
- 성공률: 90%
- 안정성: ⭐⭐⭐⭐⭐ (표준편차 8.2)
```

### 7. 이슈 및 에러 로그

**발생한 주요 이슈**:
| 이슈 타입 | 발생 횟수 | 비율 | 복구 성공률 |
|-----------|-----------|------|-------------|
| 네트워크 타임아웃 | 32회 | 56% | 96.9% |
| ADB 연결 끊김 | 15회 | 26% | 93.3% |
| 순위 체크 실패 | 10회 | 18% | 100% |
| **총계** | **57회** | **12.7%** | **95.8%** |

**크리티컬 에러**:
- 1/4 14:30 - 기기 응답 없음 (재부팅 후 복구)
- 1/6 09:15 - Chrome 크래시 (자동 재시작)

### 8. 권장 사항 (Recommendations)

```markdown
## 권장 사항

### 즉시 적용 가능
1. ✅ 케이스 A를 주요 테스트 방법으로 사용 (70%)
2. ✅ 오전 시간대 테스트 비중 확대 (40% → 50%)
3. ✅ 상품 12345678, 23456789 반복 횟수 증가 (100회)

### 중기 개선 사항
4. 📊 네트워크 안정성 개선 방안 검토
5. 📊 상품 87654321 전략 변경 (케이스 변경 또는 제외)
6. 📊 심야 시간대 테스트 확대 (효과성 높음)

### 장기 전략
7. 🔮 새로운 상품 추가 (5개)
8. 🔮 IP 로테이션 주기 최적화 (10회 → 5회?)
9. 🔮 다중 기기 동시 테스트 검토
```

### 9. 다음 주기 계획

```markdown
## 다음 주기 테스트 계획

### 목표
- 평균 순위 변동 +15위 달성
- 성공률 90% 이상 유지
- 에러율 10% 이하 감소

### 실행 계획
- 기간: 2025-01-08 ~ 2025-01-14
- 케이스 A 비중: 70% (315회)
- 케이스 B 비중: 30% (135회)
- 총 450회 테스트

### 집중 상품
- 12345678, 23456789: 각 50회
- 나머지 상품: 각 30회
```

## 출력 형식별 특징

### HTML 형식 ($2 = html)
- 인터랙티브 그래프 (Chart.js)
- 접을 수 있는 섹션
- 프린트 친화적 스타일
- 파일명: `report_{timestamp}.html`

### PDF 형식 ($2 = pdf)
- 고품질 그래프 이미지
- 페이지 번호 및 목차
- 회사 로고 삽입 가능
- 파일명: `report_{timestamp}.pdf`

### Markdown 형식 ($2 = markdown)
- GitHub 친화적
- 버전 관리 용이
- 텍스트 기반 그래프 (ASCII)
- 파일명: `report_{timestamp}.md`

## 보고서 생성 후 작업

1. **파일 저장 확인**
   !`ls -lh data/results/report_*.$2`

2. **요약 출력**
   @data/results/report_{timestamp}.$2 의 Executive Summary 섹션 읽기

3. **이메일 전송** (선택 사항)
   ```bash
   python src/utils/send_email.py \
     --to admin@example.com \
     --subject "네이버 쇼핑 트래픽 테스트 보고서 ($1)" \
     --attachment data/results/report_{timestamp}.$2
   ```

## 예시

**주간 보고서 (HTML)**:
```bash
/generate-report weekly html
```

**월간 보고서 (PDF)**:
```bash
/generate-report monthly pdf
```

**커스텀 기간 보고서 (Markdown)**:
```bash
/generate-report custom markdown
```
(이 경우 시작일/종료일을 추가로 입력받음)
