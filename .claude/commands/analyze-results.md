---
description: 테스트 결과 데이터 분석 및 통계 생성
model: claude-3-5-sonnet-20241022
allowed-tools: Bash(python:*), Read, Glob, Write
argument-hint: [start-date] [end-date]
---

네이버 쇼핑 트래픽 테스트 결과를 분석하고 통계 리포트를 생성합니다.

## 파라미터
- **시작일**: $1 (형식: YYYY-MM-DD, 기본값: 7일 전)
- **종료일**: $2 (형식: YYYY-MM-DD, 기본값: 오늘)

## 데이터 수집

### 1. 결과 파일 검색
!`find data/rankings -name "*.json" -newermt "$1" ! -newermt "$2"`

### 2. 로그 파일 검색
!`find logs -name "test_*.log" -newermt "$1" ! -newermt "$2"`

## 분석 실행

```bash
python src/analysis/stats.py \
  --start-date "$1" \
  --end-date "$2" \
  --output data/results/analysis_$(date +%Y%m%d).json
```

## 분석 항목

### 1. 순위 변동 통계

**전체 통계**:
- 평균 순위 변동
- 중앙값 (median)
- 표준편차
- 최대/최소 변동폭

**상품별 통계**:
- 각 상품의 평균 순위 변동
- 순위 상승/하락/유지 비율
- 안정성 지수 (표준편차의 역수)

### 2. 케이스별 효과성 비교

**케이스 A (네이버 검색) vs 케이스 B (쇼핑 직접)**:
- 평균 순위 변동 비교
- 통계적 유의성 검증 (t-test, p-value)
- 성공률 비교 (순위 상승 비율)

### 3. 시간대별 패턴 분석

**시간대별 순위 변동**:
- 오전 (06:00-12:00)
- 오후 (12:00-18:00)
- 저녁 (18:00-24:00)
- 심야 (00:00-06:00)

**요일별 패턴**:
- 주중 vs 주말 비교
- 요일별 평균 순위 변동

### 4. 성공률 및 에러 분석

**성공률**:
- 전체 테스트 성공률
- 상품별 성공률
- 케이스별 성공률

**에러 분석**:
- 에러 타입별 발생 빈도
- 에러 복구 성공률
- 에러 발생 패턴 (시간대, 상품)

## 출력 형식

### 텍스트 요약
```
=== 테스트 결과 분석 ===
기간: $1 ~ $2
총 테스트 횟수: 450회
분석 상품 수: 10개

[전체 통계]
평균 순위 변동: +12.4위
중앙값: +8.0위
표준편차: 15.2
성공률: 87.3% (393/450)

[케이스 비교]
케이스 A 평균: +15.2위
케이스 B 평균: +9.6위
통계적 유의성: p < 0.05 (유의함)
→ 케이스 A가 케이스 B보다 평균 5.6위 더 효과적

[시간대별 패턴]
오전: +14.2위 (가장 효과적)
오후: +11.8위
저녁: +10.5위
심야: +13.1위

[에러 분석]
총 에러: 57회 (12.7%)
- 네트워크 타임아웃: 32회 (56%)
- ADB 연결 끊김: 15회 (26%)
- 순위 체크 실패: 10회 (18%)
에러 복구 성공률: 95.8%
```

### 마크다운 표
```markdown
| 상품 ID | 상품명 | 평균 변동 | 성공률 | 안정성 |
|---------|--------|-----------|--------|--------|
| 12345678 | 무선 이어폰 A | +18.2위 | 92% | ⭐⭐⭐⭐⭐ |
| 87654321 | 무선 이어폰 B | +8.5위 | 85% | ⭐⭐⭐ |
| ... | ... | ... | ... | ... |
```

## 시각화 생성

```bash
python src/analysis/visualize.py \
  --input data/results/analysis_$(date +%Y%m%d).json \
  --output data/results/report_$(date +%Y%m%d).html
```

**생성되는 그래프**:
1. 순위 변동 추이 (line chart)
2. 케이스별 박스플롯 (box plot)
3. 시간대별 히트맵 (heatmap)
4. 상품별 성공률 (bar chart)

## 주요 인사이트 추출

분석 결과를 바탕으로 다음 질문에 답변:
1. 어떤 케이스(A/B)가 더 효과적인가?
2. 어떤 시간대에 테스트하는 것이 좋은가?
3. 어떤 상품이 가장 순위 변동이 큰가?
4. 테스트 횟수를 몇 회로 설정하는 것이 적절한가?
5. 주요 에러 원인과 개선 방안은?

## 권장 사항 생성

인사이트를 바탕으로 다음 테스트를 위한 권장 사항을 제시:
```
=== 권장 사항 ===
1. 케이스 A (네이버 검색)를 우선적으로 사용
2. 오전 시간대(06:00-12:00) 테스트 집중
3. 상품 12345678은 100회 반복 권장 (효과 검증)
4. 상품 87654321은 케이스 변경 고려 (효과 미미)
5. 네트워크 안정성 개선 필요 (에러 56%)
```

## 결과 저장

- **JSON 데이터**: `data/results/analysis_{timestamp}.json`
- **텍스트 요약**: `data/results/summary_{timestamp}.txt`
- **HTML 리포트**: `data/results/report_{timestamp}.html`
- **그래프 이미지**: `data/results/charts/{chart_name}.png`
